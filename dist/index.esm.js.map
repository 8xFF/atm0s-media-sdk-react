{"version":3,"file":"index.esm.js","sources":["../src/hooks/device.ts","../src/components/provider.tsx","../src/hooks/remote.ts","../src/hooks/session.ts","../src/hooks/state.ts","../src/hooks/actions.ts","../src/hooks/consumer.ts","../src/hooks/publisher.ts","../src/hooks/audio_level.ts","../src/components/video_viewer.tsx"],"sourcesContent":["import { TypedEventEmitter } from '@8xff/atm0s-media-js/types/lib/utils/typed-event-emitter';\nimport { getLogger } from '@8xff/atm0s-media-js/types/lib/utils/logger';\nimport { useEffect, useState } from 'react';\n\nconst logger = getLogger('DeviceHook');\n\ninterface Return {\n  media?: MediaStream;\n  error?: Error;\n}\n\nclass StreamContainer extends TypedEventEmitter<{ changed: (data: Return) => void }> {\n  count = 0;\n  data: Return = {};\n\n  constructor(private key: string) {\n    super();\n    logger.log('Created container for local stream', key);\n  }\n\n  setData(data: Return) {\n    this.data = data;\n    this.emit('changed', data);\n  }\n\n  retain() {\n    this.count += 1;\n    logger.log('Retain local stream', this.key, this.count);\n    return this.count;\n  }\n\n  release() {\n    this.count -= 1;\n    logger.log('Release local stream', this.key, this.count);\n    if (this.count == 0) {\n      logger.log('Destroy local stream', this.key);\n      this.data.media?.getTracks().map((track) => {\n        track.stop();\n      });\n    }\n    return this.count;\n  }\n}\nconst globalStore: Map<string, StreamContainer> = new Map();\n\nexport const useDevices = (\n  kind: MediaDeviceKind,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n): [MediaDeviceInfo[], any | null] => {\n  const [devices, setDevices] = useState<MediaDeviceInfo[]>([]);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    navigator.mediaDevices\n      .enumerateDevices()\n      .then((devices) => {\n        setDevices(devices.filter((d) => d.kind == kind));\n      })\n      .catch((error) => {\n        setDevices([]);\n        setError(error);\n      });\n  }, [kind]);\n\n  return [devices, error];\n};\n\nfunction getDevicePrivate(\n  kind: MediaDeviceKind,\n  deviceId: string | boolean,\n  callback: (data: Return) => void,\n): [StreamContainer, string] {\n  const key = kind + '-' + deviceId;\n  let containerSlot = globalStore.get(key);\n  if (containerSlot) {\n    containerSlot.on('changed', callback);\n    callback(containerSlot.data);\n  } else {\n    containerSlot = new StreamContainer(key);\n    globalStore.set(key, containerSlot);\n    let constraints: MediaStreamConstraints = {};\n    if (kind == 'audioinput') {\n      constraints = {\n        audio:\n          typeof deviceId == 'string'\n            ? {\n                deviceId: deviceId,\n              }\n            : true,\n      };\n    } else if (kind == 'videoinput') {\n      constraints = {\n        video:\n          typeof deviceId == 'string'\n            ? {\n                deviceId: deviceId,\n              }\n            : true,\n      };\n    }\n    navigator.mediaDevices\n      .getUserMedia(constraints)\n      .then((stream) => {\n        stream.cachedKey = key;\n        containerSlot?.setData({ media: stream });\n        callback({ media: stream });\n      })\n      .catch((err) => {\n        containerSlot?.setData({ error: err });\n        callback({ error: err });\n      });\n  }\n\n  return [containerSlot, key];\n}\n\nexport function getDevice(kind: MediaDeviceKind, deviceId: string | boolean): Promise<MediaStream> {\n  return new Promise((resolve, reject) => {\n    getDevicePrivate(kind, deviceId, (res) => {\n      if (res.error) {\n        reject(res.error);\n      } else {\n        resolve(res.media!);\n      }\n    });\n  });\n}\n\nexport function retainDevice(key: string) {\n  const slot = globalStore.get(key);\n  slot?.retain();\n}\n\nexport function releaseDevice(key: string) {\n  const slot = globalStore.get(key);\n  if (slot?.release() == 0) {\n    globalStore.delete(key);\n  }\n}\n\nexport const useDevice = (\n  kind: MediaDeviceKind,\n  deviceId: string | boolean,\n): [MediaStream | undefined, Error | undefined] => {\n  const [res, setRes] = useState({} as Return);\n  useEffect(() => {\n    if (deviceId != false) {\n      const [containerSlot, key] = getDevicePrivate(kind, deviceId, setRes);\n      containerSlot.retain();\n      return () => {\n        setRes({ media: undefined, error: undefined });\n        if (containerSlot?.release() == 0) {\n          globalStore.delete(key);\n        }\n      };\n    }\n  }, [kind, deviceId]);\n  return [res.media, res.error];\n};\n\nexport const useUserMedia = (\n  constraints?: MediaStreamConstraints,\n  active?: boolean,\n): [MediaStream | undefined, Error | undefined] => {\n  const [res, setRes] = useState({} as Return);\n  useEffect(() => {\n    if (active) {\n      let gotStream: MediaStream | undefined;\n      navigator.mediaDevices\n        .getUserMedia(constraints)\n        .then((stream) => {\n          gotStream = stream;\n          setRes({ media: stream });\n        })\n        .catch((err) => {\n          gotStream = undefined;\n          setRes({ error: err });\n        });\n      return () => {\n        setRes({ media: undefined, error: undefined });\n        gotStream?.getTracks().forEach((track) => {\n          track.stop();\n        });\n      };\n    }\n  }, [JSON.stringify(constraints), active]);\n  return [res.media, res.error];\n};\n\nexport const useDisplayMedia = (\n  constraints?: DisplayMediaStreamOptions,\n  active?: boolean,\n): [MediaStream | undefined, Error | undefined] => {\n  const [res, setRes] = useState({} as Return);\n  useEffect(() => {\n    if (active) {\n      let gotStream: MediaStream | undefined;\n      navigator.mediaDevices\n        .getDisplayMedia(constraints)\n        .then((stream) => {\n          gotStream = stream;\n          setRes({ media: stream });\n        })\n        .catch((err) => {\n          gotStream = undefined;\n          setRes({ error: err });\n        });\n      return () => {\n        setRes({ media: undefined, error: undefined });\n        gotStream?.getTracks().forEach((track) => {\n          track.stop();\n        });\n      };\n    }\n  }, [JSON.stringify(constraints), active]);\n  return [res.media, res.error];\n};\n","import React, { useCallback, useMemo, useState } from 'react';\nimport Atm0s, { type AnyFunction, type IPublisherCallbacks } from '@8xff/atm0s-media-js';\nimport { releaseDevice, retainDevice } from '../hooks/device';\n\nexport enum SessionState {\n  New = 'new',\n  Connecting = 'connecting',\n  Connected = 'connected',\n  Reconnecting = 'reconnecting',\n  Disconnected = 'disconnected',\n  Error = 'error',\n}\n\nexport class StreamPublisherWrap {\n  constructor(private publisher: Atm0s.StreamPublisher) {}\n\n  get state() {\n    return this.publisher.state;\n  }\n\n  get localStream() {\n    return this.publisher.localStream;\n  }\n\n  on(type: keyof IPublisherCallbacks, callback: AnyFunction) {\n    this.publisher.on(type, callback);\n  }\n\n  off(type: keyof IPublisherCallbacks, callback: AnyFunction) {\n    this.publisher.on(type, callback);\n  }\n\n  switchStream(stream: MediaStream | null) {\n    if (stream) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const cachedKey = stream.cachedKey;\n      if (cachedKey) {\n        retainDevice(cachedKey);\n      }\n    }\n    if (this.publisher.localStream) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const cacheKey = this.publisher.localStream.cachedKey;\n      if (cacheKey) {\n        releaseDevice(cacheKey);\n      }\n    }\n    return this.publisher.switch(stream);\n  }\n}\n\ninterface SessionContainer {\n  session: Atm0s.Session;\n  state: SessionState;\n  myAudioStreams: Atm0s.StreamRemote[];\n  myVideoStreams: Atm0s.StreamRemote[];\n  audioStreams: Atm0s.StreamRemote[];\n  videoStreams: Atm0s.StreamRemote[];\n  publishers: Map<string, ArcContainer<StreamPublisherWrap>>;\n  consumers: Map<string, ArcContainer<Atm0s.StreamConsumer>>;\n  consumerPairs: Map<string, ArcContainer<Atm0s.StreamConsumerPair>>;\n}\n\ninterface ArcContainer<T> {\n  data: T;\n  owners: Map<number, number>;\n}\n\ninterface SessionContextInfo {\n  data?: SessionContainer;\n  connect: (url: string, config: Atm0s.ISessionConfig) => void;\n  disconnect: () => void;\n  getPublisher(ownerId: number, cfg: Atm0s.SenderConfig): StreamPublisherWrap | undefined;\n  backPublisher(ownerId: number, cfg: Atm0s.SenderConfig): void;\n  getConsumer(ownerId: number, remote: Atm0s.StreamRemote): Atm0s.StreamConsumer | undefined;\n  backConsumer(owner_id: number, remote: Atm0s.StreamRemote): void;\n  getConsumerPair(\n    ownerId: number,\n    peerId: string,\n    audioName: string,\n    videoName: string,\n  ): Atm0s.StreamConsumerPair | undefined;\n  backConsumerPair(ownerId: number, peerId: string, audioName: string, videoName: string): void;\n  update: (new_info: SessionContainer) => void;\n}\n\nexport const SessionContext = React.createContext({} as SessionContextInfo);\n\ninterface Props {\n  children: React.ReactNode;\n  // log_level?: Atm0s.LogLevel;\n  url?: string;\n  config?: Atm0s.ISessionConfig;\n}\n\nlet GlobalVer = 0;\n\nexport const SessionProvider = (props: Props) => {\n  // if (props.log_level != undefined) {\n  //   Atm0s.setLogLevel(props.log_level);\n  // }\n  const [, setVer] = useState(0);\n  const storage = useMemo<{ data: SessionContainer | undefined }>(() => {\n    return { data: undefined };\n  }, []);\n  const update = useCallback(\n    (data: SessionContainer | undefined) => {\n      storage.data = data;\n      setVer(GlobalVer++);\n    },\n    [storage, setVer],\n  );\n  const connect = useCallback(\n    (url: string, config: Atm0s.ISessionConfig) => {\n      if (storage.data?.session) {\n        return () => {\n          storage.data?.session.disconnect();\n        };\n      }\n      const session = Atm0s.createSession(url, config);\n      const myAudioStreams = new Map<string, Atm0s.StreamRemote>();\n      const myVideoStreams = new Map<string, Atm0s.StreamRemote>();\n      const audioStreams = new Map<string, Atm0s.StreamRemote>();\n      const videoStreams = new Map<string, Atm0s.StreamRemote>();\n\n      const publishers: Map<string, ArcContainer<StreamPublisherWrap>> = new Map();\n      const consumers: Map<string, ArcContainer<Atm0s.StreamConsumer>> = new Map();\n      const consumerPairs: Map<string, ArcContainer<Atm0s.StreamConsumerPair>> = new Map();\n\n      config?.senders?.map((sender) => {\n        if (sender.stream) {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          const cachedKey = sender.stream.cachedKey;\n          if (cachedKey) {\n            retainDevice(cachedKey);\n          }\n        }\n      });\n\n      session.on('connected', () => {\n        if (storage.data?.session != session) return;\n        update({\n          session,\n          state: SessionState.Connected,\n          myAudioStreams: Array.from(myAudioStreams.values()),\n          myVideoStreams: Array.from(myVideoStreams.values()),\n          audioStreams: Array.from(audioStreams.values()),\n          videoStreams: Array.from(videoStreams.values()),\n          publishers,\n          consumers,\n          consumerPairs,\n        });\n      });\n\n      session.on('mystream_added', (stream: Atm0s.StreamRemote) => {\n        if (storage.data?.session != session) return;\n        const key = stream.peerId + '-' + stream.name;\n        if (stream.kind === Atm0s.StreamKinds.AUDIO) {\n          myAudioStreams.set(key, stream);\n        } else {\n          myVideoStreams.set(key, stream);\n        }\n        update({\n          session,\n          state: SessionState.Connected,\n          myAudioStreams: Array.from(myAudioStreams.values()),\n          myVideoStreams: Array.from(myVideoStreams.values()),\n          audioStreams: Array.from(audioStreams.values()),\n          videoStreams: Array.from(videoStreams.values()),\n          publishers,\n          consumers,\n          consumerPairs,\n        });\n      });\n\n      session.on('mystream_updated', (stream: Atm0s.StreamRemote) => {\n        if (storage.data?.session != session) return;\n        const key = stream.peerId + '-' + stream.name;\n        if (stream.kind === Atm0s.StreamKinds.AUDIO) {\n          myAudioStreams.set(key, stream);\n        } else {\n          myVideoStreams.set(key, stream);\n        }\n        update({\n          session,\n          state: SessionState.Connected,\n          myAudioStreams: Array.from(myAudioStreams.values()),\n          myVideoStreams: Array.from(myVideoStreams.values()),\n          audioStreams: Array.from(audioStreams.values()),\n          videoStreams: Array.from(videoStreams.values()),\n          publishers,\n          consumers,\n          consumerPairs,\n        });\n      });\n\n      session.on('mystream_removed', (stream: Atm0s.StreamRemote) => {\n        if (storage.data?.session != session) return;\n        const key = stream.peerId + '-' + stream.name;\n        if (stream.kind === Atm0s.StreamKinds.AUDIO) {\n          myAudioStreams.delete(key);\n        } else {\n          myVideoStreams.delete(key);\n        }\n        update({\n          session,\n          state: SessionState.Connected,\n          myAudioStreams: Array.from(myAudioStreams.values()),\n          myVideoStreams: Array.from(myVideoStreams.values()),\n          audioStreams: Array.from(audioStreams.values()),\n          videoStreams: Array.from(videoStreams.values()),\n          publishers,\n          consumers,\n          consumerPairs,\n        });\n      });\n\n      session.on('stream_added', (stream: Atm0s.StreamRemote) => {\n        if (storage.data?.session != session) return;\n        const key = stream.peerId + '-' + stream.name;\n        if (stream.kind === Atm0s.StreamKinds.AUDIO) {\n          audioStreams.set(key, stream);\n        } else {\n          videoStreams.set(key, stream);\n        }\n        update({\n          session,\n          state: SessionState.Connected,\n          myAudioStreams: Array.from(myAudioStreams.values()),\n          myVideoStreams: Array.from(myVideoStreams.values()),\n          audioStreams: Array.from(audioStreams.values()),\n          videoStreams: Array.from(videoStreams.values()),\n          publishers,\n          consumers,\n          consumerPairs: consumerPairs,\n        });\n      });\n\n      session.on('stream_updated', (stream: Atm0s.StreamRemote) => {\n        if (storage.data?.session != session) return;\n        const key = stream.peerId + '-' + stream.name;\n        if (stream.kind === Atm0s.StreamKinds.AUDIO) {\n          audioStreams.set(key, stream);\n        } else {\n          videoStreams.set(key, stream);\n        }\n        update({\n          session,\n          state: SessionState.Connected,\n          myAudioStreams: Array.from(myAudioStreams.values()),\n          myVideoStreams: Array.from(myVideoStreams.values()),\n          audioStreams: Array.from(audioStreams.values()),\n          videoStreams: Array.from(videoStreams.values()),\n          publishers,\n          consumers,\n          consumerPairs,\n        });\n      });\n\n      session.on('stream_removed', (stream: Atm0s.StreamRemote) => {\n        if (storage.data?.session != session) return;\n        const key = stream.peerId + '-' + stream.name;\n        if (stream.kind === Atm0s.StreamKinds.AUDIO) {\n          audioStreams.delete(key);\n        } else {\n          videoStreams.delete(key);\n        }\n        update({\n          session,\n          state: SessionState.Connected,\n          myAudioStreams: Array.from(myAudioStreams.values()),\n          myVideoStreams: Array.from(myVideoStreams.values()),\n          audioStreams: Array.from(audioStreams.values()),\n          videoStreams: Array.from(videoStreams.values()),\n          publishers,\n          consumers,\n          consumerPairs,\n        });\n      });\n\n      session.on('disconnected', () => {\n        if (storage.data?.session != session) return;\n        update({\n          session,\n          state: SessionState.Disconnected,\n          myAudioStreams: Array.from(myAudioStreams.values()),\n          myVideoStreams: Array.from(myVideoStreams.values()),\n          audioStreams: Array.from(audioStreams.values()),\n          videoStreams: Array.from(videoStreams.values()),\n          publishers,\n          consumers,\n          consumerPairs,\n        });\n      });\n      session.connect().catch((err) => {\n        if (storage.data?.session != session) return;\n        console.error(err);\n        update({\n          session,\n          state: SessionState.Error,\n          myAudioStreams: Array.from(myAudioStreams.values()),\n          myVideoStreams: Array.from(myVideoStreams.values()),\n          audioStreams: Array.from(audioStreams.values()),\n          videoStreams: Array.from(videoStreams.values()),\n          publishers,\n          consumers,\n          consumerPairs,\n        });\n      });\n      update({\n        session,\n        state: SessionState.Connecting,\n        myAudioStreams: [],\n        myVideoStreams: [],\n        audioStreams: [],\n        videoStreams: [],\n        publishers,\n        consumers,\n        consumerPairs,\n      });\n      return;\n    },\n    [storage, update],\n  );\n\n  const disconnect = useCallback(() => {\n    if (storage.data?.session) {\n      storage.data.session.disconnect();\n      update(undefined);\n    }\n  }, [storage, update]);\n\n  const getPublisher = useCallback(\n    (ownerId: number, cfg: Atm0s.SenderConfig) => {\n      const data = storage.data;\n      if (data?.session) {\n        let publisher = data.publishers.get(cfg.name);\n        if (!publisher) {\n          publisher = {\n            data: new StreamPublisherWrap(\n              data.session.createPublisher({\n                stream: cfg.stream,\n                name: cfg.name,\n                kind: cfg.kind,\n                preferredCodecs: cfg.preferredCodecs,\n                simulcast: cfg.simulcast,\n                maxBitrate: cfg.maxBitrate,\n                contentHint: cfg.contentHint,\n                screen: cfg.screen,\n              }),\n            ),\n            owners: new Map(),\n          };\n          data.publishers.set(cfg.name, publisher);\n        }\n        data.publishers.get(cfg.name)?.owners.set(ownerId, new Date().getTime());\n        return publisher.data;\n      }\n      return undefined;\n    },\n    [storage],\n  );\n\n  const backPublisher = useCallback(\n    (ownerId: number, cfg: Atm0s.SenderConfig) => {\n      const data = storage.data;\n      if (data?.session) {\n        const publisher = data.publishers.get(cfg.name);\n        if (publisher) {\n          publisher.owners.delete(ownerId);\n          if (publisher.owners.size == 0) {\n            publisher.data.switchStream(null);\n            data.publishers.delete(cfg.name);\n          }\n        }\n      }\n      return undefined;\n    },\n    [storage],\n  );\n\n  const getConsumer = useCallback(\n    (ownerId: number, stream: Atm0s.StreamRemote) => {\n      const data = storage.data;\n      if (data?.session) {\n        const key = stream.peerId + '-' + stream.name;\n        let consumer = data.consumers.get(key);\n        if (!consumer) {\n          consumer = {\n            data: data.session.createConsumer(stream),\n            owners: new Map(),\n          };\n          data.consumers.set(key, consumer);\n        }\n        data.consumers.get(key)?.owners.set(ownerId, new Date().getTime());\n        return consumer.data;\n      }\n      return undefined;\n    },\n    [storage],\n  );\n\n  const backConsumer = useCallback(\n    (ownerId: number, stream: Atm0s.StreamRemote) => {\n      const data = storage.data;\n      if (data?.session) {\n        const key = stream.peerId + '-' + stream.name;\n        const consumer = data.consumers.get(key);\n        if (consumer) {\n          consumer.owners.delete(ownerId);\n          if (consumer.owners.size == 0) {\n            data.consumers.delete(key);\n          }\n        }\n      }\n      return undefined;\n    },\n    [storage],\n  );\n\n  const getConsumerPair = useCallback(\n    (ownerId: number, peerId: string, audioName: string, videoName: string) => {\n      const data = storage.data;\n      if (data?.session) {\n        const key = peerId + '-' + audioName + '-' + videoName;\n        let consumer = data.consumerPairs.get(key);\n        if (!consumer) {\n          consumer = {\n            data: data.session.createConsumerPair(peerId, audioName, videoName),\n            owners: new Map(),\n          };\n          data.consumerPairs.set(key, consumer);\n        }\n        data.consumerPairs.get(key)?.owners.set(ownerId, new Date().getTime());\n        return consumer.data;\n      }\n      return undefined;\n    },\n    [storage],\n  );\n\n  const backConsumerPair = useCallback(\n    (ownerId: number, peerId: string, audioName: string, videoName: string) => {\n      const data = storage.data;\n      if (data?.session) {\n        const key = peerId + '-' + audioName + '-' + videoName;\n        const consumer = data.consumerPairs.get(key);\n        if (consumer) {\n          consumer.owners.delete(ownerId);\n          if (consumer.owners.size == 0) {\n            data.consumerPairs.delete(key);\n          }\n        }\n      }\n      return undefined;\n    },\n    [storage],\n  );\n\n  React.useEffect(() => {\n    if (props.url && props.config) {\n      connect(props.url, props.config);\n      return () => {\n        disconnect();\n      };\n    }\n  }, [props.url, props.config, connect, disconnect]);\n\n  return (\n    <SessionContext.Provider\n      value={{\n        data: storage.data,\n        connect,\n        disconnect,\n        getPublisher: getPublisher,\n        backPublisher: backPublisher,\n        getConsumer: getConsumer,\n        backConsumer: backConsumer,\n        getConsumerPair: getConsumerPair,\n        backConsumerPair: backConsumerPair,\n        update,\n      }}>\n      {props.children}\n    </SessionContext.Provider>\n  );\n};\n","import { useContext } from 'react';\nimport { SessionContext } from '../components/provider';\nimport Atm0s from '@8xff/atm0s-media-js';\n\nexport const useRemoteStreams = (kind: Atm0s.StreamKinds, isMine?: boolean): Atm0s.StreamRemote[] => {\n  const { data } = useContext(SessionContext);\n  if (kind == Atm0s.StreamKinds.AUDIO) {\n    if (isMine === true) {\n      return data?.myAudioStreams || [];\n    } else {\n      return data?.audioStreams || [];\n    }\n  } else {\n    if (isMine === true) {\n      return data?.myVideoStreams || [];\n    } else {\n      return data?.videoStreams || [];\n    }\n  }\n};\n\nexport const usePeerRemoteStreams = (peerId: string, kind: Atm0s.StreamKinds): Atm0s.StreamRemote[] => {\n  const { data } = useContext(SessionContext);\n  if (kind == Atm0s.StreamKinds.AUDIO) {\n    return data?.audioStreams.filter((a) => a.peerId === peerId) || [];\n  } else {\n    return data?.videoStreams.filter((a) => a.peerId === peerId) || [];\n  }\n};\n","import { useContext } from 'react';\nimport { SessionContext } from '../components/provider';\nimport Atm0s from '@8xff/atm0s-media-js';\n\nexport const useSession = (): Atm0s.Session | undefined => {\n  const { data } = useContext(SessionContext);\n  return data?.session;\n};\n","import { useContext } from 'react';\nimport { SessionContext, SessionState } from '../components/provider';\n\nexport const useSessionState = (): SessionState => {\n  const { data } = useContext(SessionContext);\n  return data?.state || SessionState.New;\n};\n","import { useContext } from 'react';\nimport { SessionContext } from '../components/provider';\nimport type { ISessionConfig } from '@8xff/atm0s-media-js';\n\ninterface Actions {\n  connect: (url: string, config: ISessionConfig) => void;\n  disconnect: () => void;\n  playAudioMix: () => void;\n}\n\nexport const useActions = (): Actions => {\n  const { connect, disconnect } = useContext(SessionContext);\n  return {\n    connect,\n    disconnect,\n    playAudioMix: () => {\n      // data?.session.getMixMinusAudio()?.play();\n    },\n  };\n};\n","import { useContext, useEffect, useMemo, useState, type LegacyRef } from 'react';\nimport { SessionContext, SessionState } from '../components/provider';\nimport Atm0s from '@8xff/atm0s-media-js';\nimport { useSessionState } from './state';\n\nlet idSeed = 0;\nexport const useConsumer = (\n  remote?: Atm0s.StreamRemote,\n  priority?: number,\n  maxSpatial?: number,\n  maxTemporal?: number,\n): [LegacyRef<HTMLVideoElement> | undefined, Atm0s.StreamReceiverState, Atm0s.StreamConsumer | undefined] => {\n  const consumerId = useMemo(() => idSeed++, []);\n  const sessionState = useSessionState();\n  const [consumer, setConsumer] = useState<Atm0s.StreamConsumer>();\n  const [state, setState] = useState<Atm0s.StreamReceiverState>(Atm0s.StreamReceiverState.NoSource);\n  const [element, setElement] = useState<HTMLVideoElement>();\n  const { data, getConsumer, backConsumer } = useContext(SessionContext);\n\n  const isConnectionEstablished = [SessionState.Connected, SessionState.Reconnecting].indexOf(sessionState) >= 0;\n\n  useEffect(() => {\n    if (data?.session && remote) {\n      const consumer = getConsumer(consumerId, remote);\n      if (consumer) {\n        consumer.on('state', setState);\n        setState(consumer.state);\n        setConsumer(consumer);\n        return () => {\n          consumer?.unview('use-consumer-' + consumerId);\n          consumer?.off('state', setState);\n          backConsumer(consumerId, remote);\n        };\n      }\n    }\n  }, [data?.session, remote]);\n\n  useEffect(() => {\n    if (element && consumer && isConnectionEstablished) {\n      element.srcObject = consumer.view('use-consumer-' + consumerId, priority, maxSpatial, maxTemporal);\n      return () => {\n        element.srcObject = null;\n        consumer.unview('use-consumer-' + consumerId);\n      };\n    }\n  }, [element, consumer, isConnectionEstablished]);\n\n  useEffect(() => {\n    if (element && consumer && isConnectionEstablished) {\n      consumer.limit('use-consumer-' + consumerId, priority, maxSpatial, maxTemporal);\n    }\n  }, [element, consumer, isConnectionEstablished, priority, maxSpatial, maxTemporal]);\n\n  const ref = (instance: HTMLVideoElement | null) => {\n    setElement(instance || undefined);\n  };\n\n  return [ref, state, consumer];\n};\n\nexport const useConsumerPair = (\n  peerId: string,\n  audioName: string,\n  videoName: string,\n  priority?: number,\n  maxSpatial?: number,\n  maxTemporal?: number,\n): [LegacyRef<HTMLVideoElement> | undefined, Atm0s.StreamReceiverState, Atm0s.StreamConsumerPair | undefined] => {\n  const consumerId = useMemo(() => idSeed++, []);\n  const sessionState = useSessionState();\n  const [consumer, setConsumer] = useState<Atm0s.StreamConsumerPair>();\n  const [state, setState] = useState<Atm0s.StreamReceiverState>(Atm0s.StreamReceiverState.NoSource);\n  const [element, setElement] = useState<HTMLVideoElement>();\n  const { data, getConsumerPair: getConsumerPair, backConsumerPair: backConsumerPair } = useContext(SessionContext);\n\n  const isConnectionEstablished = [SessionState.Connected, SessionState.Reconnecting].indexOf(sessionState) >= 0;\n\n  useEffect(() => {\n    if (data?.session) {\n      const consumer = getConsumerPair(consumerId, peerId, audioName, videoName);\n      if (consumer) {\n        consumer.on('state', setState);\n        setState(consumer.state);\n        setConsumer(consumer);\n        return () => {\n          consumer?.off('state', setState);\n          backConsumerPair(consumerId, peerId, audioName, videoName);\n        };\n      }\n    }\n  }, [data?.session, peerId, audioName, videoName]);\n\n  useEffect(() => {\n    if (element && consumer && isConnectionEstablished) {\n      element.srcObject = consumer.view('use-consumer-' + consumerId, priority, maxSpatial, maxTemporal);\n      return () => {\n        element.srcObject = null;\n        consumer.unview('use-consumer-' + consumerId);\n      };\n    }\n  }, [element, consumer, isConnectionEstablished]);\n\n  useEffect(() => {\n    if (element && consumer && isConnectionEstablished) {\n      consumer.limit('use-consumer-' + consumerId, priority, maxSpatial, maxTemporal);\n    }\n  }, [element, consumer, isConnectionEstablished, priority, maxSpatial, maxTemporal]);\n\n  const ref = (instance: HTMLVideoElement | null) => {\n    setElement(instance || undefined);\n  };\n\n  return [ref, state, consumer];\n};\n\nexport const useLocalConsumer = (stream?: MediaStream) => {\n  const [element, setElement] = useState<HTMLVideoElement>();\n  useEffect(() => {\n    if (element && stream) {\n      element.srcObject = stream;\n      return () => {\n        element.srcObject = null;\n      };\n    }\n  }, [element, stream]);\n\n  return (instance: HTMLVideoElement | null) => {\n    setElement(instance || undefined);\n  };\n};\n","import { useContext, useEffect, useMemo, useState } from 'react';\nimport { SessionContext, StreamPublisherWrap } from '../components/provider';\nimport Atm0s from '@8xff/atm0s-media-js';\n\nlet idSeed = 0;\n\nexport const usePublisher = (\n  cfg: Atm0s.SenderConfig,\n): [Atm0s.StreamSenderState, MediaStream | undefined | null, StreamPublisherWrap | undefined] => {\n  const publisherId = useMemo(() => idSeed++, []);\n  const [state, setState] = useState<Atm0s.StreamSenderState>(Atm0s.StreamSenderState.Created);\n  const [producer, setProducer] = useState<StreamPublisherWrap>();\n  const { data, getPublisher: getPublisher, backPublisher: backPublisher } = useContext(SessionContext);\n  useEffect(() => {\n    if (data?.session) {\n      const newProducer = getPublisher(publisherId, cfg);\n      if (newProducer) {\n        const onUpdateState = (state: Atm0s.StreamSenderState) => {\n          setState(state);\n        };\n        newProducer.on('state', onUpdateState);\n        setProducer(newProducer);\n        setState(newProducer.state);\n        return () => {\n          newProducer?.off('state', onUpdateState);\n          backPublisher(publisherId, cfg);\n        };\n      }\n    }\n  }, [data?.session, cfg.kind + cfg.name]);\n\n  return [state, producer?.localStream, producer];\n};\n","import { useContext, useEffect, useState } from 'react';\nimport * as Bluesea from '@8xff/atm0s-media-js';\nimport { StreamPublisherWrap, BlueseaSessionContext } from '../components';\n\nexport const useAudioLevelConsumer = (\n  consumer?: Bluesea.StreamConsumer | Bluesea.StreamConsumerPair,\n): number | undefined => {\n  const [audioLevel, setAudioLevel] = useState<number | undefined>(undefined);\n  useEffect(() => {\n    if (consumer) {\n      const handler = (level: number) => {\n        setAudioLevel(level);\n      };\n      consumer.on('audio_level', handler);\n\n      return () => {\n        consumer.off('audio_level', handler);\n      };\n    } else {\n      setAudioLevel(undefined);\n    }\n  }, [consumer]);\n  return audioLevel;\n};\n\nexport const useAudioLevelProducer = (producer?: StreamPublisherWrap): number | undefined => {\n  const [audioLevel, setAudioLevel] = useState<number | undefined>(undefined);\n  useEffect(() => {\n    if (producer) {\n      const handler = (level: number) => {\n        setAudioLevel(level);\n      };\n      producer.on('audio_level', handler);\n\n      return () => {\n        producer.off('audio_level', handler);\n      };\n    } else {\n      setAudioLevel(undefined);\n    }\n  }, [producer]);\n  return audioLevel;\n};\n\nexport interface AudioMixSlotInfo {\n  peerId: string;\n  streamName: string;\n  audioLevel: number;\n}\n\nexport const useAudioSlotMix = (slotIndex: number) => {\n  const [slot, setSlot] = useState<AudioMixSlotInfo | undefined>(undefined);\n  const { data } = useContext(BlueseaSessionContext);\n  useEffect(() => {\n    const mixMinus = data?.session.getMixMinusAudio();\n    if (mixMinus) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const handler = (info: any | null) => {\n        if (info) {\n          const sourceId = info[0].split(':');\n          setSlot({\n            peerId: sourceId[0],\n            streamName: sourceId[1],\n            audioLevel: info[1],\n          });\n        } else {\n          setSlot(undefined);\n        }\n      };\n      mixMinus.on(`slot_${slotIndex}`, handler);\n\n      return () => {\n        mixMinus?.off(`slot_${slotIndex}`, handler);\n      };\n    }\n  }, [slotIndex, data?.session.getMixMinusAudio()]);\n  return slot;\n};\n\nexport const useAudioLevelMix = (peerId: string, streamName: string) => {\n  const [audioLevel, setAudioLevel] = useState<number | undefined>(undefined);\n  const { data } = useContext(BlueseaSessionContext);\n  useEffect(() => {\n    const mixMinus = data?.session.getMixMinusAudio();\n    if (mixMinus) {\n      const handler = (level: number | null) => {\n        setAudioLevel(level || undefined);\n      };\n      mixMinus.on(`source_${peerId}:${streamName}`, handler);\n\n      return () => {\n        mixMinus?.off(`source_${peerId}:${streamName}`, handler);\n      };\n    }\n  }, [peerId, streamName, data?.session.getMixMinusAudio()]);\n  return audioLevel;\n};\n","import { StreamRemote } from '@8xff/atm0s-media-js';\nimport React from 'react';\nimport { useConsumer, useLocalConsumer } from '../hooks';\n\nexport const RemoteViewer = (props: { remote: StreamRemote; priority?: number }) => {\n  const [ref, state] = useConsumer(props.remote, props.priority);\n  return (\n    <div className=\"w-full h-full\">\n      <div>{state}</div>\n      <video muted autoPlay className=\"w-full h-full\" ref={ref}></video>\n    </div>\n  );\n};\n\nexport const LocalViewer = (props: { stream: MediaStream }) => {\n  const ref = useLocalConsumer(props.stream);\n  return <video muted autoPlay className=\"w-full h-full\" ref={ref}></video>;\n};\n\nexport const VideoViewer = (props: { stream: MediaStream | StreamRemote; priority?: number }) => {\n  if (props.stream instanceof StreamRemote) {\n    return <RemoteViewer remote={props.stream} priority={props.priority}></RemoteViewer>;\n  } else {\n    return <LocalViewer stream={props.stream}></LocalViewer>;\n  }\n};\n"],"names":["idSeed","BlueseaSessionContext"],"mappings":"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"}